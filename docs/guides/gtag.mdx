---
title: Google Tag (gtag.js)
description: Learn how to integrate c15t with Google Tag (gtag.js).
lastModified: 2025-09-29
canary: true
---

c15t supports Google Tag (gtag.js) and Consent Mode v2. The pre-built c15t script will automatically inject the gtag script into your page and update the consent state in gtag to match the consent state in c15t.

Allowing c15t to manage gtag prevents any issues with gtag scripts being loaded without the correct consent.

## Implementation

<Steps>
  <Step>
    ### Setting up c15t with Google Tag

    <Tabs items={['JavaScript', 'React', 'Next.js + App Router', 'Next.js + Pages Router']}>
      <Tab value="JavaScript">
        ```ts
        import { configureConsentManager } from 'c15t';
        import { googleTagManager } from '@c15t/scripts/google-tag-manager';

        configureConsentManager({
          // ... 
          scripts: [
            googleTagManager({
              id: 'GTM-XXXXXXX',
            }),
          ],
        });
        ```
      </Tab>

      <Tab value="React">
        ```tsx
        import { googleTagManager } from '@c15t/scripts';
        import { ConsentManagerProvider } from '@c15t/react';

        export function App() { 
          <ConsentManagerProvider
            options={{
              scripts: [
                googleTagManager({
                  id: 'GTM-XXXXXXX',
                }),
              ]),
            }}
          >
            {children}
          </ConsentManagerProvider>
        }
        >
        ```
      </Tab>

      <Tab value="Next.js + App Router">
        ```tsx
        'use client';
        import { googleTagManager } from '@c15t/scripts';
        import { ClientSideOptionsProvider } from '@c15t/nextjs/client';

        export function ConsentManagerClient({ children }: { children: React.ReactNode }) { 
          <ClientSideOptionsProvider
            scripts={[
              scripts: [
                googleTagManager({
                  id: 'GTM-XXXXXXX',
              }),
              ],
            ]}
          >
            {children}
          </ClientSideOptionsProvider>
        }
        ```
      </Tab>

      <Tab value="Next.js + Pages Router">
        ```tsx
        import { googleTagManager } from '@c15t/scripts';
        import { ConsentManagerProvider } from '@c15t/nextjs';

        export function App() { 
          <ConsentManagerProvider
            options={{
              // ... other options
              scripts: [
                googleTagManager({
                  id: 'GTM-XXXXXXX',
                }),
              ]),
            }}
          >
            {children}
          </ConsentManagerProvider>
        }
        >
        ```
      </Tab>
    </Tabs>
  </Step>
</Steps>

## Types

### GoogleTagManagerOptions

<AutoTypeTable path="./packages/scripts/src/google-tag-manager.ts" name="GoogleTagManagerOptions" />

### Script

<AutoTypeTable path="./packages/core/src/libs/script-loader/types.ts" name="Script" />